{"ast":null,"code":"var _jsxFileName = \"/Users/valentinemaillard/Desktop/Development/Projects/Travel_Advisor_frontend/src/DestinationComponents/ShowContainer.jsx\";\nimport React, { Component } from 'react';\nimport CommentContainer from './CommentContainer';\nimport PhotoContainer from './PhotoContainer';\nimport ThingsToDoContainer from './ThingsToDoContainer';\nimport { Button, Card, Header } from 'semantic-ui-react';\n\nclass ShowContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n\n    this.createComment = newComment => {\n      fetch('http://localhost:4000/reviews', {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          \"accept\": \"application/json\",\n          \"Authorization\": `bearer ${localStorage.token}`\n        },\n        body: JSON.stringify({\n          destination_id: this.state.id,\n          comment: newComment.comment,\n          rating: newComment.rating\n        })\n      }).then(r => r.json()).then(newReview => {\n        let reviewArr = [...this.state.reviews, newReview];\n        this.setState({\n          reviews: reviewArr\n        });\n      });\n    };\n\n    this.deleteReview = review_id => {\n      fetch(`http://localhost:4000/reviews/${review_id}`, {\n        method: \"DELETE\"\n      }).then(r => r.json()).then(deletedReview => {\n        let newReviewArr = this.state.reviews.filter(review => review.id !== deletedReview.review.id);\n        this.setState({ ...this.state,\n          reviews: newReviewArr\n        });\n      });\n    };\n\n    this.addToBucketList = () => {\n      fetch('http://localhost:4000/add_joiners', {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          \"Authorization\": `bearer ${localStorage.token}`\n        },\n        body: JSON.stringify({\n          destination_id: this.state.id\n        })\n      }).then(r => r.json()).then(add_joiner => {\n        let newAddJoiner = [...this.state.add_joiners, add_joiner];\n        this.setState({\n          add_joiners: newAddJoiner\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    let destination_id = this.props.routerProps.match.params.id;\n    fetch(`http://localhost:4000/destinations/${destination_id}`).then(r => r.json()).then(destination => {\n      this.setState({ ...destination\n      });\n    });\n  }\n\n  render() {\n    let {\n      things_to_dos\n    } = this.state;\n    let thingsToDo = !things_to_dos ? null : things_to_dos.map(thingstodo => React.createElement(ThingsToDoContainer, {\n      key: thingstodo.id,\n      thingstodo: thingstodo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.addToBucketList,\n      className: \"add-to-bucketlist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"+ Add to bucketlist\"), React.createElement(PhotoContainer, {\n      destination: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(Header, {\n      className: \"things-to-do-container-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Things to Do\"), React.createElement(Card.Group, {\n      className: \"things-to-do-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, thingsToDo), React.createElement(CommentContainer, {\n      routerProps: this.props.routerProps,\n      deleteReview: this.deleteReview,\n      createComment: this.createComment,\n      destination: this.state,\n      user: this.props.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ShowContainer;","map":{"version":3,"sources":["/Users/valentinemaillard/Desktop/Development/Projects/Travel_Advisor_frontend/src/DestinationComponents/ShowContainer.jsx"],"names":["React","Component","CommentContainer","PhotoContainer","ThingsToDoContainer","Button","Card","Header","ShowContainer","state","createComment","newComment","fetch","method","headers","localStorage","token","body","JSON","stringify","destination_id","id","comment","rating","then","r","json","newReview","reviewArr","reviews","setState","deleteReview","review_id","deletedReview","newReviewArr","filter","review","addToBucketList","add_joiner","newAddJoiner","add_joiners","componentDidMount","props","routerProps","match","params","destination","render","things_to_dos","thingsToDo","map","thingstodo","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport CommentContainer from './CommentContainer'\nimport PhotoContainer from './PhotoContainer'\nimport ThingsToDoContainer from './ThingsToDoContainer'\nimport { Button, Card, Header } from 'semantic-ui-react'\n\nclass ShowContainer extends Component {\n\n  state = {\n\n  }\n\n  componentDidMount() {\n    let destination_id = this.props.routerProps.match.params.id\n    fetch(`http://localhost:4000/destinations/${destination_id}`)\n    .then(r => r.json())\n    .then(destination => {\n      this.setState({\n        ...destination\n      })\n    })\n  }\n\n  createComment = (newComment) => {\n    fetch('http://localhost:4000/reviews', {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"accept\": \"application/json\",\n        \"Authorization\": `bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({\n        destination_id: this.state.id,\n        comment: newComment.comment,\n        rating: newComment.rating\n      })\n    })\n    .then(r => r.json())\n    .then((newReview) => {\n      let reviewArr = [...this.state.reviews, newReview]\n      this.setState({\n        reviews: reviewArr\n      })\n    })\n  }\n\n  deleteReview = (review_id) => {\n\n    fetch(`http://localhost:4000/reviews/${review_id}`, {\n      method: \"DELETE\"\n    })\n    .then(r => r.json())\n    .then(deletedReview => {\n      let newReviewArr = this.state.reviews.filter(review => review.id !== deletedReview.review.id)\n      this.setState({\n        ...this.state,\n        reviews: newReviewArr\n      })\n    })\n  }\n\n  addToBucketList = () => {\n    fetch('http://localhost:4000/add_joiners', {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"Authorization\": `bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({\n        destination_id: this.state.id\n      })\n    })\n    .then(r => r.json())\n    .then(add_joiner => {\n      let newAddJoiner = [...this.state.add_joiners, add_joiner]\n      this.setState({\n        add_joiners: newAddJoiner\n      })\n    })\n  }\n\n  render() {\n    let { things_to_dos } = this.state\n\n    let thingsToDo = !things_to_dos ? null : things_to_dos.map(thingstodo => <ThingsToDoContainer key={thingstodo.id} thingstodo={thingstodo}/>)\n\n    return (\n      <div>\n        <Button onClick={this.addToBucketList} className=\"add-to-bucketlist\">+ Add to bucketlist</Button>\n        <PhotoContainer destination={this.state}/>\n        <Header className=\"things-to-do-container-header\">Things to Do</Header>\n        <Card.Group className=\"things-to-do-container\">{thingsToDo}</Card.Group>\n        <CommentContainer routerProps={this.props.routerProps} deleteReview={this.deleteReview} createComment={this.createComment} destination={this.state} user={this.props.user} />\n      </div>\n    );\n  }\n\n}\n\nexport default ShowContainer;\n"]},"metadata":{},"sourceType":"module"}