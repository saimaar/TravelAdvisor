{"ast":null,"code":"var _jsxFileName = \"/Users/valentinemaillard/Desktop/Development/Projects/Travel_Advisor_frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport './App.css';\nimport { Route, Switch } from 'react-router';\nimport HomeContainer from './HomeComponents/HomeContainer';\nimport ProfileContainer from './ProfileComponents/ProfileContainer';\nimport ShowContainer from './DestinationComponents/ShowContainer';\nimport HeaderContainer from './HeaderContainer.jsx';\nimport Footer from './Footer';\nimport NotFound from './NotFound';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      destinations: [],\n      search: \"\"\n    };\n\n    this.createNewUser = newUser => {\n      this.setState({\n        user: newUser.user,\n        token: newUser.token\n      });\n    };\n\n    this.loginUser = user => {\n      fetch('http://localhost:4000/login', {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      }).then(r => r.json()).then(userData => {\n        if (!userData.error) {\n          localStorage.setItem(\"token\", userData.token);\n          this.setState({\n            user: userData.user\n          });\n        }\n      });\n    };\n\n    this.updateSearchForm = newValue => {\n      this.setState(prevState => {\n        return {\n          search: newValue\n        };\n      });\n    };\n\n    this.filterSearch = () => {\n      let newArr = this.state.destinations.filter(destination => {\n        let searchValue = this.state.search.toLowerCase();\n        return destination.name.toLowerCase().includes(searchValue) || destination.trip_type.toLowerCase().includes(searchValue);\n      });\n      return newArr;\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:4000/destinations`).then(r => r.json()).then(destinations => {\n      this.setState({\n        destinations\n      });\n    });\n\n    if (localStorage.token) {\n      fetch(`http://localhost:4000/persist`, {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      }).then(r => r.json()).then(data => {\n        if (data.token) {\n          this.setState({\n            user: data.user\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"page-window\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(HeaderContainer, {\n      createNewUser: this.createNewUser,\n      loginUser: this.loginUser,\n      historyProps: this.props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      className: \"header-separation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(HomeContainer, {\n        destinations: this.filterSearch(),\n        search: this.state.search,\n        updateSearchForm: this.updateSearchForm,\n        routerProps: this.props,\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      render: routerProps => React.createElement(ProfileContainer, {\n        routerProps: routerProps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/:name/:id\",\n      render: routerProps => React.createElement(ShowContainer, {\n        user: this.state.user,\n        routerProps: routerProps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/valentinemaillard/Desktop/Development/Projects/Travel_Advisor_frontend/src/App.js"],"names":["React","Component","withRouter","Route","Switch","HomeContainer","ProfileContainer","ShowContainer","HeaderContainer","Footer","NotFound","App","state","user","destinations","search","createNewUser","newUser","setState","token","loginUser","fetch","method","headers","body","JSON","stringify","then","r","json","userData","error","localStorage","setItem","updateSearchForm","newValue","prevState","filterSearch","newArr","filter","destination","searchValue","toLowerCase","name","includes","trip_type","componentDidMount","data","render","props","routerProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport './App.css';\nimport { Route, Switch } from 'react-router'\nimport HomeContainer from './HomeComponents/HomeContainer'\nimport ProfileContainer from './ProfileComponents/ProfileContainer'\nimport ShowContainer from './DestinationComponents/ShowContainer'\nimport HeaderContainer from './HeaderContainer.jsx'\nimport Footer from './Footer'\nimport NotFound from './NotFound';\n\nclass App extends Component {\n\n  state={\n    user: {},\n    destinations:[],\n    search: \"\"\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:4000/destinations`)\n    .then(r => r.json())\n    .then((destinations) => {\n      this.setState({\n        destinations\n      })\n    })\n\n    if(localStorage.token){\n      fetch(`http://localhost:4000/persist`, {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      })\n      .then(r => r.json())\n      .then((data) => {\n        if(data.token){\n          this.setState({\n              user: data.user\n            })\n          }\n        })\n      }\n  }\n\n  createNewUser = (newUser) => {\n    this.setState({\n      user: newUser.user,\n      token: newUser.token\n    })\n  }\n\n  loginUser = (user) => {\n    fetch('http://localhost:4000/login', {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    })\n    .then(r => r.json())\n    .then(userData => {\n      if(!userData.error){\n        localStorage.setItem(\"token\", userData.token)\n        this.setState({\n          user: userData.user\n        })\n      }\n    })\n\n    \n\n  }\n\n  updateSearchForm = (newValue) => {\n    this.setState(prevState => {\n      return {\n        search: newValue\n      }\n    })\n  }\n\n  filterSearch = () => {\n    let newArr = this.state.destinations.filter( destination => {\n      let searchValue = this.state.search.toLowerCase()\n      return destination.name.toLowerCase().includes(searchValue) || destination.trip_type.toLowerCase().includes(searchValue)\n    })\n    return newArr\n  }\n\n  render() {\n    \n    return (\n\n      <div className=\"page-window\">\n          <HeaderContainer createNewUser={this.createNewUser} loginUser={this.loginUser} historyProps={this.props} />\n          <hr className=\"header-separation\"/>\n\n        <Switch>\n          <Route exact path='/' render={ () => <HomeContainer\n          destinations={this.filterSearch()}\n          search={this.state.search}\n          updateSearchForm={this.updateSearchForm}\n          routerProps={this.props}\n          user={this.state.user}\n          />} />\n          <Route exact path='/profile' render={ (routerProps) => <ProfileContainer routerProps={routerProps} /> }/>\n          <Route  path='/:name/:id' render={ (routerProps) => <ShowContainer user={this.state.user} routerProps={routerProps} /> }/>\n        </Switch>\n\n        <Footer />\n      </div>\n\n    )\n  }\n\n}\n\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}